{
    "swagger": "2.0",
    "host": "127.0.0.1:8000",
    "basePath": "/api/washing_alots_app/",
    "info": {
        "version": "1.0.0",
        "title": "Simple API",
        "description": "A simple API to learn how to write OpenAPI Specification"
    },
    "schemes": [
        "http"
    ],
    "consumes": [
        "application/json"
    ],
    "produces": [
        "application/json"
    ],
    "securityDefinitions": {
        "oauth": {
            "tokenUrl": "http://auth.ibtspl.com/oauth2/",
            "flow": "password",
            "scopes": {
                "read": "read users",
                "write": "create users",
                "update": "update users",
                "delete": "delete users"
            },
            "type": "oauth2"
        }
    },
    "security": [],
    "definitions": {
        "TimeSlot": {
            "type": "object",
            "properties": {
                "from_time": {
                    "type": "string"
                },
                "to_time": {
                    "type": "string"
                }
            },
            "required": [
                "from_time",
                "to_time"
            ]
        },
        "TimeSlotsAvailability": {
            "type": "object",
            "properties": {
                "time_slot": {
                    "$ref": "#/definitions/TimeSlot"
                },
                "is_available": {
                    "type": "boolean"
                }
            }

        },
        "AvailableSlots": {
            "type": "object",
            "properties": {
                "available_slots": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "available_date": {
                                "type": "string",
                                "format": "date"
                            },
                            "time_slots": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/definitions/TimeSlotsAvailability"
                                }
                            },

                        },
                        "required": [
                            "available_date",
                            "time_slot",
                            "is_available"
                        ]
                    }
                }
            }
        },
        "UpcomingSlots": {
            "type": "object",
            "properties": {
                "upcoming_slots": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "washing_machine_id": {
                                "type": "integer",
                                "format": "int64"
                            },
                            "time_slots": {
                                "$ref": "#/definitions/TimeSlot"
                            }
                        },
                        "required": [
                            "washing_machine_id",
                            "time_slots"
                        ]
                    }
                }
            }
        },
        "BookSlot": {
            "type": "object",
            "properties": {
                "date": {
                    "type": "string",
                    "format": "date"
                },
                "time_slot": {
                    "$ref": "#/definitions/TimeSlot"
                }
            },
            "required": [
                "date",
                "from_time",
                "to_time"
            ]
        },
        "PreviousSlots": {
            "type": "object",
            "properties": {
                "previous_slots": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "date": {
                                "type": "string",
                                "format": "date"
                            },
                            "time_slot": {
                                "$ref": "#/definitions/TimeSlot"
                            },
                            "washing_machine_id": {
                                "type": "integer",
                                "format": "int64"
                            }
                        },
                        "required": [
                            "date",
                            "time",
                            "washing_machine_id"
                        ]
                    }
                }
            }
        },
        "AdminWashingMachines": {
            "type": "object",
            "properties": {
                "washing_machines": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "washine_machine_id": {
                                "type": "integer",
                                "format": "int64"
                            },
                            "is_active": {
                                "type": "boolean"
                            }
                        },
                        "required": [
                            "washing_machine_id",
                            "is_active"
                        ]
                    }
                }
            }
        },
        "Slots": {
            "type": "object",
            "properties": {
                "day": {
                    "type": "string",
                    "enum": [
                        "Monday",
                        "Tuesday",
                        "Wednesday",
                        "Thursday",
                        "Friday",
                        "Saturday"
                    ]
                }
            },
            "required": [
                "day"
            ]

        },
        "WashingMachine": {
            "type": "object",
            "properties": {
                "is_active": {
                    "type": "boolean"
                }
            },
            "required": [
                "is_active"
            ]
        },
        "SlotsResponse": {
            "type": "object",
            "properties": {
                "slot": {
                    "type": "string"
                },
                "from_time": {
                    "type": "string"
                },
                "to_time": {
                    "type": "string"
                }
            },
            "required": [
                "slot",
                "from_time",
                "to_time"
            ]
        }
    },
    "parameters": {
        "TodoId": {
            "description": "todo id",
            "in": "path",
            "name": "id",
            "required": true,
            "type": "integer"
        },
        "SlotsRequest": {
            "description": "washing slots",
            "in": "body",
            "name": "day",
            "required": true,
            "schema": {
                "$ref": "#/definitions/Slots"
            }
        },
        "BookSlotRequest": {
            "description": "Confirm Slot",
            "in": "body",
            "name": "confirm_slot",
            "required": true,
            "schema": {
                "$ref": "#/definitions/BookSlot"
            }
        },
        "WashingMachineRequest": {
            "description": "active or inactive",
            "in": "body",
            "name": "status",
            "required": true,
            "schema": {
                "$ref": "#/definitions/WashingMachine"
            }
        }
    },
    "responses": {
        "SuccessResponse": {
            "description": "success response"
        },
        "AvailableSlotsResponse": {
            "description": "Available Slots",
            "schema": {
                "$ref": "#/definitions/AvailableSlots"

            }
        },
        "PreviousSlotsResponse": {
            "description": "Previous Slots",
            "schema": {
                "$ref": "#/definitions/PreviousSlots"
            }
        },
        "AdminWashingMachinesResponse": {
            "description": "Returns all Washing machines",
            "schema": {
                "$ref": "#/definitions/AdminWashingMachines"
            }
        },
        "SlotBookResponse": {
            "description": "Raises corresponding exceptions",
            "schema": {
                "type": "string",
                "enum": [
                    "ExpiredSlot",
                    "AnotherAttemptToBook"
                ]
            }
        },
        "SlotsSuccessResponse": {
            "description": "Returns all slots",
            "schema": {
                "type": "array",
                "items": {
                    "$ref": "#/definitions/SlotsResponse"
                }
            }
        }
    },
    "paths": {
        "/slots/available/v1/": {
            "get": {
                "summary": "get available slots",
                "description": "get available slots",
                "operationId": "available_slots",
                "security": [{
                    "oauth": [
                        "write",
                        "read"
                    ]
                }],
                "responses": {
                    "200": {

                        "$ref": "#/responses/AvailableSlotsResponse"
                    }

                }
            }
        },
        "/slot/upcoming/v1/": {
            "get": {
                "summary": "Get upcoming slot",
                "description": "Returns upcoming slot.",
                "operationId": "get_upcoming_slot",
                "security": [{
                    "oauth": [
                        "read"
                    ]
                }],
                "responses": {
                    "200": {
                        "description": "Returns your booked date",
                        "schema": {
                            "$ref": "#/definitions/UpcomingSlots"

                        }
                    }
                }
            }
        },
        "/slot/book/v1/": {
            "post": {
                "summary": "slot booking",
                "description": "slot booking.",
                "operationId": "book_slot",
                "security": [{
                    "oauth": [
                        "write"
                    ]
                }],
                "parameters": [{
                    "$ref": "#/parameters/BookSlotRequest"
                }],
                "responses": {
                    "200": {
                        "description": "SuccessResponse"
                    },
                    "400": {
                        "$ref": "#/responses/SlotBookResponse"
                    }
                }
            }
        },
        "/slots/previous/v1/": {
            "get": {
                "summary": "Previous slots",
                "description": "prevoius slots",
                "operationId": "previous_slots",
                "security": [{
                    "oauth": [
                        "read"
                    ]
                }],
                "parameters": [{
                        "name": "offset",
                        "in": "query",
                        "required": true,
                        "description": "Some description for offset",
                        "type": "integer"
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": true,
                        "description": "Some description for limit",
                        "type": "integer"
                    }
                ],
                "responses": {
                    "200": {
                        "$ref": "#/responses/PreviousSlotsResponse"
                    }
                }
            }
        },
        "/washing_machines/v1/": {
            "post": {
                "summary": "washing machines",
                "description": "washing machines",
                "operationId": "washing_machines",
                "security": [{
                    "oauth": [
                        "write",
                        "read"
                    ]
                }],
                "parameters": [{
                    "$ref": "#/parameters/WashingMachineRequest"
                }],
                "responses": {
                    "200": {
                        "$ref": "#/responses/AdminWashingMachinesResponse"
                    }
                }
            }
        },
        "/slots/corresponding/{washing_machine_id}/v1/": {
            "post": {
                "summary": "Washing slots",
                "description": "washing slots for corresponding date",
                "operationId": "washing_slots",
                "security": [{
                    "oauth": [
                        "write",
                        "read"
                    ]
                }],
                "parameters": [{
                        "name": "washing_machine_id",
                        "in": "path",
                        "required": true,
                        "description": "Particular Washing machine id",
                        "type": "string"
                    },
                    {
                        "$ref": "#/parameters/SlotsRequest"
                    }
                ],
                "responses": {
                    "200": {
                        "$ref": "#/responses/SlotsSuccessResponse"
                    }
                }
            }
        }
    }

}
