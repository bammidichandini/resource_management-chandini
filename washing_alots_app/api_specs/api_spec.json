{
    "swagger": "2.0",
    "host": "127.0.0.1:8000",
    "basePath": "/api/washing_alots_app/",
    "info": {
        "version": "1.0.0",
        "title": "Simple API",
        "description": "A simple API to learn how to write OpenAPI Specification"
    },
    "schemes": [
        "http"
    ],
    "consumes": [
        "application/json"
    ],
    "produces": [
        "application/json"
    ],
    "securityDefinitions": {
        "oauth": {
            "tokenUrl": "http://auth.ibtspl.com/oauth2/",
            "flow": "password",
            "scopes": {
                "read": "read users",
                "write": "create users",
                "update": "update users",
                "delete": "delete users"
            },
            "type": "oauth2"
        }
    },
    "security": [],
    "definitions": {
        "time_slot": {
            "type": "object",
            "properties": {
                "from_time": {
                    "type": "string"
                },
                "to_time": {
                    "type": "string"
                }
            },
            "required": [
                "from_time",
                "to_time"
            ]
        },
        "time_slots_availability": {
            "allOf": [{
                    "$ref": "#/definitions/time_slot"
                },
                {
                    "type": "object",
                    "properties": {
                        "is_available": {
                            "type": "string"
                        }
                    }
                }
            ]
        },
        "AvailableSlots": {
            "type": "object",
            "properties": {
                "available_slots": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "available_date": {
                                "type": "string",
                                "format": "date"
                            },
                            "time_slots": {
                                "$ref": "#/definitions/time_slots_availability"

                            },

                        },
                        "required": [
                            "available_date",
                            "time_slot",
                            "is_available"
                        ]
                    }
                }
            }
        },
        "UpcomingSlots": {
            "type": "object",
            "properties": {
                "upcoming_slots": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "washing_machine_id": {
                                "type": "integer",
                                "format": "int64"
                            },
                            "time_slots": {
                                "$ref": "#/definitions/time_slot"
                            }
                        },
                        "required": [
                            "washing_machine_id",
                            "time_slots"
                        ]
                    }
                }
            }
        },
        "BookSlot": {
            "type": "object",
            "properties": {
                "date": {
                    "type": "string",
                    "format": "date"
                },
                "from_time": {
                    "type": "string"
                },
                "to_time": {
                    "type": "string"
                }
            },
            "required": [
                "date",
                "from_time",
                "to_time"
            ]
        },
        "PreviousSlots": {
            "type": "object",
            "properties": {
                "previous_slots": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "date": {
                                "type": "string",
                                "format": "date"
                            },
                            "time": {
                                "$ref": "#/definitions/time_slot"
                            },
                            "washing_machine_id": {
                                "type": "integer",
                                "format": "int64"
                            }
                        },
                        "required": [
                            "date",
                            "time",
                            "washing_machine_id"
                        ]
                    }
                }
            }
        },
        "AdminWashingMachines": {
            "type": "object",
            "properties": {
                "washing_machines": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "washine_machine_id": {
                                "type": "integer",
                                "format": "int64"
                            },
                            "is_active": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "washing_machine_id",
                            "is_active"
                        ]
                    }
                }
            }
        },
        "WashingMachine": {
            "type": "object",
            "properties": {
                "status": {
                    "type": "string"
                }
            },
            "required": [
                "status"
            ]
        }
    },
    "parameters": {
        "TodoId": {
            "description": "todo id",
            "in": "path",
            "name": "id",
            "required": true,
            "type": "integer"
        },
        "BookSlotRequest": {
            "description": "Confirm Slot",
            "in": "body",
            "name": "confirm_slot",
            "required": true,
            "schema": {
                "$ref": "#/definitions/BookSlot"
            }
        },
        "WashingMachineRequest": {
            "description": "active or inactive",
            "in": "body",
            "name": "status",
            "required": true,
            "schema": {
                "$ref": "#/definitions/WashingMachine"
            }
        }
    },
    "responses": {
        "SuccessResponse": {
            "description": "success response"
        },
        "AvailableSlotsResponse": {
            "description": "Available Slots",
            "schema": {
                "$ref": "#/definitions/AvailableSlots"

            }
        },
        "PreviousSlotsResponse": {
            "description": "Previous Slots",
            "schema": {
                "$ref": "#/definitions/PreviousSlots"
            }
        },
        "AdminWashingMachinesResponse": {
            "description": "Returns all Washing machines",
            "schema": {
                "$ref": "#/definitions/AdminWashingMachines"
            }
        }
    },
    "paths": {
        "/slots/available/v1/": {
            "get": {
                "summary": "get available slots",
                "description": "get available slots",
                "operationId": "available_slots",
                "security": [{
                    "oauth": [
                        "write",
                        "read"
                    ]
                }],
                "responses": {
                    "200": {

                        "$ref": "#/responses/AvailableSlotsResponse"
                    }

                }
            }
        },
        "/slot/upcoming/v1/": {
            "get": {
                "summary": "Get upcoming slot",
                "description": "Returns upcoming slot.",
                "operationId": "get_upcoming_slot",
                "security": [{
                    "oauth": [
                        "read"
                    ]
                }],
                "responses": {
                    "200": {
                        "description": "Returns your booked date",
                        "schema": {
                            "$ref": "#/definitions/UpcomingSlots"

                        }
                    }
                }
            }
        },
        "/slot/booking/v1/": {
            "post": {
                "summary": "slot booking",
                "description": "slot booking.",
                "operationId": "book_slot",
                "security": [{
                    "oauth": [
                        "write"
                    ]
                }],
                "parameters": [{
                    "$ref": "#/parameters/BookSlotRequest"
                }],
                "responses": {
                    "200": {
                        "description": "SuccessResponse"
                    }
                }
            }
        },
        "/previous_slots/v1/": {
            "get": {
                "summary": "Previous slots",
                "description": "prevoius slots",
                "operationId": "previous_slots",
                "security": [{
                    "oauth": [
                        "read"
                    ]
                }],
                "parameters": [{
                        "name": "offset",
                        "in": "query",
                        "description": "Some description for offset",
                        "type": "integer"
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Some description for limit",
                        "type": "integer"
                    }
                ],
                "responses": {
                    "200": {
                        "$ref": "#/responses/PreviousSlotsResponse"
                    }
                }
            }
        },
        "/washing_machines/v1/": {
            "post": {
                "summary": "washing machines",
                "description": "washing machines",
                "operationId": "washing_machines",
                "security": [{
                    "oauth": [
                        "write",
                        "read"
                    ]
                }],
                "parameters": [{
                    "$ref": "#/parameters/WashingMachineRequest"
                }],
                "responses": {
                    "200": {
                        "$ref": "#/responses/AdminWashingMachinesResponse"
                    }
                }
            }
        }
    }

}
